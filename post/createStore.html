<!DOCTYPE html><html lang="en-US"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><title>redux源码解析-createStore | Xu dongdong&#x27;s blog</title><meta name="description" content="深入源码解析createStore内部代码"/><meta property="og:type" content="website"/><meta name="og:title" property="og:title" content="redux源码解析-createStore"/><meta name="og:description" property="og:description" content="深入源码解析createStore内部代码"/><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="redux源码解析-createStore"/><meta name="twitter:description" content="深入源码解析createStore内部代码"/><meta name="twitter:creator" content="https://twitter.com/WhyYouJames"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link rel="manifest" href="/site.webmanifest"/><meta name="next-head-count" content="16"/><link rel="preload" href="/_next/static/css/78703f496e0c7a1c56bf.css" as="style"/><link rel="stylesheet" href="/_next/static/css/78703f496e0c7a1c56bf.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-c6f966696d7d46f48c33.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.10b3d8f36ae5d485c3da.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.18cd929bdef6e2f96561.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-f27fc0fb87beab5a2800.js" as="script"/><link rel="preload" href="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.a9797b0ef67aa51709db.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/post/%5Bslug%5D-5905726faed1db0b6bb8.js" as="script"/></head><body><div id="__next"><div class="w-full min-h-screen dark:bg-gray-700 dark:text-white flex"><div class="max-w-screen-md px-4 py-12 mx-auto antialiased font-body flex flex-col flex-grow"><header class="flex items-center justify-between  mb-2"><div class="max-w-lg"><h1><a class="text-2xl font-black text-black no-underline font-display dark:text-white" href="/">Xu dongdong&#x27;s blog</a></h1></div></header><main class="flex-grow"><article><header class="mb-8"><h1 class="mb-2 text-6xl font-black leading-none font-display">redux源码解析-createStore</h1><p class="text-sm">June 22, 2021</p></header><div class="mb-4 prose lg:prose-lg dark:prose-dark"><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-javascript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#f1fa8c">createStore</span><span class="token" style="color:#f8f8f2">(</span><span>reducer</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">[</span><span>initState</span><span class="token" style="color:#f8f8f2">,</span><span> enhancer</span><span class="token" style="color:#f8f8f2">]</span><span class="token" style="color:#f8f8f2">)</span></code></pre><h2>参数</h2><ol><li><p><a href="https://redux.js.org/understanding/thinking-in-redux/glossary#reducer"><strong>reducer</strong></a> (<em>Function</em>):  接受两个参数，分别是当前的 <strong>state</strong> 和要处理的 <a href="https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow#actions"><strong>action</strong></a></p></li><li><p>[<strong>preloadedState</strong>] (<em>any</em>):  初始状态的 <strong>state</strong>，其实在实际开发中很少在这边给应用赋上初始 <strong>state</strong>，一般会在各自的 <strong>reducer</strong> 中赋上初始 <strong>state</strong>:</p></li></ol><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-javascript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#8be9fd">const</span><span> initialState </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6272a4">// reducer</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token function-variable" style="color:#f1fa8c">todoApp</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">state </span><span class="token parameter" style="color:#f8f8f2">=</span><span class="token parameter"> initialState</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> action</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token" style="color:#6272a4">// 这里暂不处理任何 action，</span><span>
</span><span>  </span><span class="token" style="color:#6272a4">// 仅返回传入的 state。</span><span>
</span><span>  </span><span class="token control-flow" style="color:#8be9fd">return</span><span> state
</span><span></span><span class="token" style="color:#f8f8f2">}</span></code></pre><p>值得注意的是: 通常情况下，通过 <strong>preloadedState</strong> 指定的 <strong>state</strong> 要优先于通过 <strong>reducer</strong> 指定 <strong>state</strong> :</p><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-javascript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports" style="color:#f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports" style="color:#f8f8f2">}</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&#x27;redux&#x27;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#6272a4">// reducer</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> a </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>state </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&#x27;lol&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> action</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#8be9fd">return</span><span> state</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">const</span><span> b </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span>state </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#50fa7b">&#x27;wat&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> action</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#8be9fd">return</span><span> state</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#6272a4">// const combined = combineReducers({ a, b })</span><span>
</span><span></span><span class="token" style="color:#8be9fd">const</span><span> </span><span class="token function-variable" style="color:#f1fa8c">combined</span><span> </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter">state </span><span class="token parameter" style="color:#f8f8f2">=</span><span class="token parameter"> </span><span class="token parameter" style="color:#f8f8f2">{</span><span class="token parameter" style="color:#f8f8f2">}</span><span class="token parameter" style="color:#f8f8f2">,</span><span class="token parameter"> action</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#8be9fd">return</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    a</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">a</span><span class="token" style="color:#f8f8f2">(</span><span>state</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">a</span><span class="token" style="color:#f8f8f2">,</span><span> action</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">,</span><span>
</span><span>    b</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#f1fa8c">b</span><span class="token" style="color:#f8f8f2">(</span><span>state</span><span class="token" style="color:#f8f8f2">.</span><span class="token property-access">b</span><span class="token" style="color:#f8f8f2">,</span><span> action</span><span class="token" style="color:#f8f8f2">)</span><span>
</span><span>  </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">const</span><span> store </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">createStore</span><span class="token" style="color:#f8f8f2">(</span><span>combined</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span> a</span><span class="token" style="color:#f8f8f2">:</span><span> </span><span class="token" style="color:#50fa7b">&#x27;horse&#x27;</span><span> </span><span class="token" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span>store</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">getState</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">;</span><span> </span><span class="token" style="color:#6272a4">// { a: &#x27;horse&#x27;, b: &#x27;wat&#x27; }</span></code></pre><ol start="3"><li>[<strong>enhancer</strong>] (<em>Function</em>):  高阶函数，通常是指中间件，必须用 <strong>applyMiddleware()</strong> 包装下：</li></ol><pre style="color:#f8f8f2;background:#282a36;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em"><code class="language-javascript" style="color:#f8f8f2;background:none;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports" style="color:#f8f8f2">{</span><span class="token imports"> createStore</span><span class="token imports" style="color:#f8f8f2">,</span><span class="token imports"> applyMiddleware </span><span class="token imports" style="color:#f8f8f2">}</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&#x27;redux&#x27;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span><span></span><span class="token module" style="color:#8be9fd">import</span><span> </span><span class="token imports">thunk</span><span> </span><span class="token module" style="color:#8be9fd">from</span><span> </span><span class="token" style="color:#50fa7b">&#x27;redux-thunk&#x27;</span><span class="token" style="color:#f8f8f2">;</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">function</span><span> </span><span class="token" style="color:#f1fa8c">logger</span><span class="token" style="color:#f8f8f2">(</span><span class="token parameter" style="color:#f8f8f2">{</span><span class="token parameter"> getState </span><span class="token parameter" style="color:#f8f8f2">}</span><span class="token" style="color:#f8f8f2">)</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>  </span><span class="token control-flow" style="color:#8be9fd">return</span><span> </span><span class="token parameter">next</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token parameter">action</span><span> </span><span class="token arrow" style="color:#f8f8f2">=&gt;</span><span> </span><span class="token" style="color:#f8f8f2">{</span><span>
</span><span>    </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&#x27;will dispatch&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> action</span><span class="token" style="color:#f8f8f2">)</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">// Call the next dispatch method in the middleware chain.</span><span>
</span><span>    </span><span class="token" style="color:#8be9fd">const</span><span> returnValue </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">next</span><span class="token" style="color:#f8f8f2">(</span><span>action</span><span class="token" style="color:#f8f8f2">)</span><span>
</span>
<span>    </span><span class="token console" style="color:#f1fa8c">console</span><span class="token" style="color:#f8f8f2">.</span><span class="token method property-access" style="color:#f1fa8c">log</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#50fa7b">&#x27;state after dispatch&#x27;</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f1fa8c">getState</span><span class="token" style="color:#f8f8f2">(</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span><span>
</span>
<span>    </span><span class="token" style="color:#6272a4">// This will likely be the action itself, unless</span><span>
</span><span>    </span><span class="token" style="color:#6272a4">// a middleware further in chain changed it.</span><span>
</span><span>    </span><span class="token control-flow" style="color:#8be9fd">return</span><span> returnValue
</span><span>  </span><span class="token" style="color:#f8f8f2">}</span><span>
</span><span></span><span class="token" style="color:#f8f8f2">}</span><span>
</span>
<span></span><span class="token" style="color:#8be9fd">const</span><span> store </span><span class="token" style="color:#f8f8f2">=</span><span> </span><span class="token" style="color:#f1fa8c">createStore</span><span class="token" style="color:#f8f8f2">(</span><span>todos</span><span class="token" style="color:#f8f8f2">,</span><span> </span><span class="token" style="color:#f1fa8c">applyMiddleware</span><span class="token" style="color:#f8f8f2">(</span><span>thunk</span><span class="token" style="color:#f8f8f2">,</span><span> logger</span><span class="token" style="color:#f8f8f2">)</span><span class="token" style="color:#f8f8f2">)</span></code></pre></div><hr class="mt-4"/><footer><div class="flex items-center mt-8 mb-16"><picture class="flex-shrink-0 mb-0 mr-3 rounded-full w-14 h-14 select-none cursor-pointer hvr-float-shadow"><source type="image/webp" data-srcset="/_next/static/images/profile-8ed88833980dc158e6d9ec3b1bb7c0a8.png.webp"/><source type="image/png" data-srcset="/_next/static/images/profile-44443f720aaa2ff4c2b67336ff9f586b.png"/><img class="lazyload blur flex-shrink-0 mb-0 mr-3 rounded-full w-14 h-14 select-none cursor-pointer hvr-float-shadow" alt="Profile" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAAklEQVR4AewaftIAAAFBSURBVAXBSS8DYQCA4fcz33RqWpUuU8tEkKjtUqIhJELiRCJxcfRf/AknP8OFiwMXF40DSVO0iRhLVbR0mX08jzg63Ikc28NzA1QR8vBcJ6Eq9AYUDMNAxlOsrBSRH40WIoLJbIL1qTzS63JvfRKJECd0MM0h9IREmZ4YOyaAw7UCG6UlNpfneaw8UbNa4Ie4tk9uSEO6nouCoO9FZEZNWu8WcUViZpLsH+wyMjnBX7eDzCuQ0zVsAtpvb1RrL9Stb3RNkO//MSwl6mAcWRrNMLO1jZ5UuSiXITXO6vISp+eXbNs+olal02kj/YUidiyJ5wsK63u8N74xSxmmyrecnF2TNtJoUkUa2RxO95ew3+al1yXm9tCCiLnCLPqrRbP5QSRC5GLsi0DVkekUj5UKjZ8+TSdA6ikWigYDqs/VzR3/TEV/Airrby8AAAAASUVORK5CYII="/></picture><p class="text-base leading-7">Written by <b class="font-semibold">xudd</b> <!-- -->who wants to become rich！！！<!-- --> <a href="https://twitter.com/https://twitter.com/WhyYouJames">Follow him on twitter</a></p></div></footer></article><nav class="flex flex-wrap justify-between mb-10"><a class="text-lg font-bold" href="/post/debounce-and-throttle">← <!-- -->防抖和节流</a><div></div></nav></main><footer class="text-lg font-light">© <!-- -->2021<!-- --> <a href="https://github.com/aaronxdd">Dongdong Xu</a>, Built with<!-- --> <a href="https://nextjs.org/">Next.js</a>🔥, Deployed on<!-- --> <a href="https://pages.github.com/">GitHub Pages</a></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"title":"redux源码解析-createStore","date":"June 22, 2021","description":"深入源码解析createStore内部代码"},"post":{"content":"\n``` javascript\ncreateStore(reducer, [initState, enhancer])\n```\n\n## 参数\n\n1. [**reducer**](https://redux.js.org/understanding/thinking-in-redux/glossary#reducer) (*Function*):  接受两个参数，分别是当前的 **state** 和要处理的 [**action**](https://redux.js.org/tutorials/fundamentals/part-2-concepts-data-flow#actions)\n\n2. [**preloadedState**] (*any*):  初始状态的 **state**，其实在实际开发中很少在这边给应用赋上初始 **state**，一般会在各自的 **reducer** 中赋上初始 **state**: \n\n``` javascript\nconst initialState = {}\n\n  // reducer\nconst todoApp = (state = initialState, action) =\u003e {\n  // 这里暂不处理任何 action，\n  // 仅返回传入的 state。\n  return state\n}\n```\n值得注意的是: 通常情况下，通过 **preloadedState** 指定的 **state** 要优先于通过 **reducer** 指定 **state** : \n\n``` javascript\nimport { createStore } from 'redux';\n// reducer\nconst a = (state = 'lol', action) =\u003e {\n  return state;\n}\n\nconst b = (state = 'wat', action) =\u003e {\n  return state;\n}\n\n// const combined = combineReducers({ a, b })\nconst combined = (state = {}, action) =\u003e {\n  return {\n    a: a(state.a, action),\n    b: b(state.b, action)\n  };\n}\n\nconst store = createStore(combined, { a: 'horse' });\nconsole.log(store.getState()); // { a: 'horse', b: 'wat' }\n```\n\n3. [**enhancer**] (*Function*):  高阶函数，通常是指中间件，必须用 **applyMiddleware()** 包装下：\n\n``` javascript\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\n\nfunction logger({ getState }) {\n  return next =\u003e action =\u003e {\n    console.log('will dispatch', action)\n\n    // Call the next dispatch method in the middleware chain.\n    const returnValue = next(action)\n\n    console.log('state after dispatch', getState())\n\n    // This will likely be the action itself, unless\n    // a middleware further in chain changed it.\n    return returnValue\n  }\n}\n\nconst store = createStore(todos, applyMiddleware(thunk, logger))\n```\n","excerpt":""},"previousPost":{"slug":"debounce-and-throttle","frontmatter":{"title":"防抖和节流","date":"June 8, 2021","description":"防抖和节流分别是啥？有啥应用场景？"},"excerpt":"","content":"\n## 防抖(debounce)\n\n\u003e todo...\n"},"nextPost":null},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"createStore"},"buildId":"vM0MvuRleZn00exG2p4EV","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8f31809deb7932dd0187.js"></script><script src="/_next/static/chunks/main-c6f966696d7d46f48c33.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.10b3d8f36ae5d485c3da.js" async=""></script><script src="/_next/static/chunks/commons.18cd929bdef6e2f96561.js" async=""></script><script src="/_next/static/chunks/pages/_app-f27fc0fb87beab5a2800.js" async=""></script><script src="/_next/static/chunks/1173eff4538ab0eae4f3f506dea9a7965770ad37.a9797b0ef67aa51709db.js" async=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-5905726faed1db0b6bb8.js" async=""></script><script src="/_next/static/vM0MvuRleZn00exG2p4EV/_buildManifest.js" async=""></script><script src="/_next/static/vM0MvuRleZn00exG2p4EV/_ssgManifest.js" async=""></script></body></html>